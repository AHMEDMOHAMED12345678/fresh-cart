import{a as B}from"./chunk-S4BPINDP.js";import{a as O,b as h,c as I,d as T,h as w,i as V,j as M,k as N,m as q}from"./chunk-UX4A3BJZ.js";import{c as E}from"./chunk-36HDSY3G.js";import{f as F}from"./chunk-3VHEFNMM.js";import"./chunk-KG3CRA4N.js";import{Bb as S,Cb as _,Jb as a,Kb as u,Pa as l,Vb as p,Wb as s,X as x,_a as y,ea as v,eb as m,fa as b,kb as C,ob as d,sb as e,tb as t,ub as c}from"./chunk-GYQL3Z4S.js";import"./chunk-EQDQRRRY.js";function D(i,n){i&1&&(e(0,"li"),a(1,"details Is Required"),t())}function R(i,n){if(i&1&&(e(0,"div",6),v(),e(1,"svg",12),c(2,"path",13),t(),b(),e(3,"span",14),a(4,"Danger"),t(),e(5,"div")(6,"ul",15),m(7,D,2,0,"li"),t()()()),i&2){let r,o=_();l(7),d((r=o.checkOutForm.get("details"))!=null&&r.getError("required")?7:-1)}}function H(i,n){i&1&&(e(0,"li"),a(1,"phone Is Required"),t())}function P(i,n){i&1&&(e(0,"li"),a(1,"Enter Valid phone"),t())}function A(i,n){if(i&1&&(e(0,"div",6),v(),e(1,"svg",12),c(2,"path",13),t(),b(),e(3,"span",14),a(4,"Danger"),t(),e(5,"div")(6,"ul",15),m(7,H,2,0,"li")(8,P,2,0,"li"),t()()()),i&2){let r,o=_();l(7),d((r=o.checkOutForm.get("phone"))!=null&&r.getError("required")?7:(r=o.checkOutForm.get("phone"))!=null&&r.getError("pattern")?8:-1)}}function L(i,n){i&1&&(e(0,"li"),a(1,"city Is Required"),t())}function Z(i,n){if(i&1&&(e(0,"div",6),v(),e(1,"svg",12),c(2,"path",13),t(),b(),e(3,"span",14),a(4,"Danger"),t(),e(5,"div")(6,"ul",15),m(7,L,2,0,"li"),t()()()),i&2){let r,o=_();l(7),d((r=o.checkOutForm.get("city"))!=null&&r.getError("required")?7:-1)}}var G=class i{formBuilder=x(N);activatedRoute=x(F);ordersService=x(B);myToken=localStorage.getItem("userToken");checkOutForm;cartId="";ngOnInit(){this.initForm(),this.getCartId(),console.log(this.myToken)}initForm(){this.checkOutForm=this.formBuilder.group({details:[null,[h.required]],phone:[null,[h.required,h.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[h.required]]})}getCartId(){this.activatedRoute.paramMap.subscribe({next:n=>{this.cartId=n.get("id")},error:n=>{console.log(n)}})}submitForm(){this.cartId,console.log(this.checkOutForm.value),this.ordersService.checkOutPayment(this.cartId,this.checkOutForm.value).subscribe({next:n=>{console.log(n),n.status=="success"&&open(n.session.url,"_self")},error:n=>{console.log(n)}})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=y({type:i,selectors:[["app-checkout"]],decls:26,vars:20,consts:[[1,"w-[75%]","mx-auto","border","rounded","shadow","p-4","my-10","bg-gray-50"],[1,"text-3xl","text-green-600","text-center","font-light","capitalize"],[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","details",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["id","details","formControlName","details",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:border-gray-600","dark:placeholder-gray-400","dark:focus:ring-green-500","dark:focus:border-green-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-white","rounded-lg","bg-green-600","dark:text-green-400"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","tel","id","phone","formControlName","phone","title","input",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:border-gray-600","dark:placeholder-gray-400","dark:focus:ring-green-500","dark:focus:border-green-500"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","city","formControlName","city","title","input",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:border-gray-600","dark:placeholder-gray-400","dark:focus:ring-green-500","dark:focus:border-green-500"],["type","submit",1,"btn-main",3,"disabled"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"]],template:function(r,o){if(r&1&&(e(0,"section",0)(1,"h1",1),a(2),p(3,"translate"),t(),e(4,"form",2),S("ngSubmit",function(){return o.submitForm()}),e(5,"div",3)(6,"label",4),a(7),p(8,"translate"),t(),c(9,"textarea",5),m(10,R,8,1,"div",6),t(),e(11,"div",3)(12,"label",7),a(13),p(14,"translate"),t(),c(15,"input",8),m(16,A,9,1,"div",6),t(),e(17,"div",3)(18,"label",9),a(19),p(20,"translate"),t(),c(21,"input",10),m(22,Z,8,1,"div",6),t(),e(23,"button",11),a(24),p(25,"translate"),t()()()),r&2){let g,f,k;l(2),u(s(3,10,"checkoutVisa.checkOut")),l(2),C("formGroup",o.checkOutForm),l(3),u(s(8,12,"checkoutVisa.details")),l(3),d((g=o.checkOutForm.get("details"))!=null&&g.errors&&((g=o.checkOutForm.get("details"))!=null&&g.touched)?10:-1),l(3),u(s(14,14,"checkoutVisa.phone")),l(3),d((f=o.checkOutForm.get("phone"))!=null&&f.errors&&((f=o.checkOutForm.get("phone"))!=null&&f.touched)?16:-1),l(3),u(s(20,16,"checkoutVisa.city")),l(3),d((k=o.checkOutForm.get("city"))!=null&&k.errors&&((k=o.checkOutForm.get("city"))!=null&&k.touched)?22:-1),l(),C("disabled",o.checkOutForm.invalid),l(),u(s(25,18,"checkoutVisa.onlinePayment"))}},dependencies:[q,w,O,I,T,V,M,E],encapsulation:2})};export{G as CheckoutComponent};
