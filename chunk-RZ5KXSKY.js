import{a as G}from"./chunk-CRTR47NW.js";import"./chunk-G5KA7DMQ.js";import{a as q,b as _,c as D,d as M,e as F,f as b,h as N,i as R,j as B,m as H}from"./chunk-UX4A3BJZ.js";import{c as I}from"./chunk-36HDSY3G.js";import{h as V}from"./chunk-3VHEFNMM.js";import"./chunk-KG3CRA4N.js";import{Bb as y,Cb as u,Jb as l,Kb as T,Lb as f,Pa as a,Vb as c,Wb as g,X as k,_a as P,a as v,ca as S,da as w,ea as C,eb as s,fa as x,kb as h,ob as m,sb as i,tb as n,ub as p,xb as E}from"./chunk-GYQL3Z4S.js";import"./chunk-EQDQRRRY.js";function A(e,r){e&1&&(i(0,"li"),l(1,"email Is Required"),n())}function Z(e,r){e&1&&(i(0,"li"),l(1,"Enter Valid Email"),n())}function $(e,r){if(e&1&&(i(0,"div",7),C(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),s(7,A,2,0,"li")(8,Z,2,0,"li"),n()()()),e&2){let t,o=u(2);a(7),m((t=o.verifyEmail.get("email"))!=null&&t.getError("required")?7:(t=o.verifyEmail.get("email"))!=null&&t.getError("email")?8:-1)}}function j(e,r){e&1&&(i(0,"span"),p(1,"i",13),n())}function z(e,r){if(e&1){let t=E();i(0,"form",3),y("ngSubmit",function(){S(t);let d=u();return w(d.verifyEmailSubmit())}),i(1,"div",4)(2,"label",5),l(3),c(4,"translate"),n(),p(5,"input",6),s(6,$,9,1,"div",7),i(7,"button",8),l(8),c(9,"translate"),s(10,j,2,0,"span"),n()()()}if(e&2){let t,o=u();h("formGroup",o.verifyEmail),a(3),T(g(4,5,"forgot.email")),a(3),m((t=o.verifyEmail.get("email"))!=null&&t.errors&&((t=o.verifyEmail.get("email"))!=null&&t.touched)?6:-1),a(2),f("",g(9,7,"forgot.verifyEmail")," "),a(2),m(o.isSubmit?10:-1)}}function O(e,r){e&1&&(i(0,"li"),l(1,"resetcode Is Required"),n())}function J(e,r){e&1&&(i(0,"li"),l(1,"Enter Valid resetcode"),n())}function K(e,r){if(e&1&&(i(0,"div",7),C(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),s(7,O,2,0,"li")(8,J,2,0,"li"),n()()()),e&2){let t,o=u(2);a(7),m((t=o.verifyCode.get("resetCode"))!=null&&t.getError("required")?7:(t=o.verifyCode.get("resetCode"))!=null&&t.getError("pattern")?8:-1)}}function Q(e,r){e&1&&(i(0,"span"),p(1,"i",13),n())}function U(e,r){if(e&1){let t=E();i(0,"form",3),y("ngSubmit",function(){S(t);let d=u();return w(d.verifyCodeSubmit())}),i(1,"div",4)(2,"label",14),l(3),c(4,"translate"),n(),p(5,"input",15),s(6,K,9,1,"div",7),i(7,"button",8),l(8),c(9,"translate"),s(10,Q,2,0,"span"),n()()()}if(e&2){let t,o=u();h("formGroup",o.verifyCode),a(3),f("",g(4,5,"forgot.resetCode")," "),a(3),m((t=o.verifyCode.get("resetCode"))!=null&&t.errors&&((t=o.verifyCode.get("resetCode"))!=null&&t.touched)?6:-1),a(2),f("",g(9,7,"forgot.verifyCode")," "),a(2),m(o.isSubmit?10:-1)}}function W(e,r){e&1&&(i(0,"li"),l(1,"email Is Required"),n())}function X(e,r){e&1&&(i(0,"li"),l(1,"Enter Valid Email"),n())}function Y(e,r){if(e&1&&(i(0,"div",7),C(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),s(7,W,2,0,"li")(8,X,2,0,"li"),n()()()),e&2){let t,o=u(2);a(7),m((t=o.resetPassword.get("email"))!=null&&t.getError("required")?7:(t=o.resetPassword.get("email"))!=null&&t.getError("email")?8:-1)}}function ee(e,r){e&1&&(i(0,"li"),l(1,"password Is Required"),n())}function te(e,r){e&1&&(i(0,"li"),l(1,"Enter Valid Password"),n())}function ie(e,r){if(e&1&&(i(0,"div",7),C(),i(1,"svg",9),p(2,"path",10),n(),x(),i(3,"span",11),l(4,"Danger"),n(),i(5,"div")(6,"ul",12),s(7,ee,2,0,"li")(8,te,2,0,"li"),n()()()),e&2){let t,o=u(2);a(7),m((t=o.resetPassword.get("newPassword"))!=null&&t.getError("required")?7:(t=o.resetPassword.get("newPassword"))!=null&&t.getError("pattern")?8:-1)}}function ne(e,r){e&1&&(i(0,"span"),p(1,"i",13),n())}function oe(e,r){if(e&1){let t=E();i(0,"form",3),y("ngSubmit",function(){S(t);let d=u();return w(d.resetPasswordSubmit())}),i(1,"div",4)(2,"label",5),l(3),c(4,"translate"),n(),p(5,"input",6),s(6,Y,9,1,"div",7),n(),i(7,"div",4)(8,"label",14),l(9),c(10,"translate"),n(),p(11,"input",16),s(12,ie,9,1,"div",7),n(),i(13,"button",8),l(14),c(15,"translate"),s(16,ne,2,0,"span"),n()()}if(e&2){let t,o,d=u();h("formGroup",d.resetPassword),a(3),f("",g(4,7,"forgot.email")," "),a(3),m((t=d.resetPassword.get("email"))!=null&&t.errors&&((t=d.resetPassword.get("email"))!=null&&t.touched)?6:-1),a(3),f("",g(10,9,"forgot.password")," "),a(3),m((o=d.resetPassword.get("newPassword"))!=null&&o.errors&&((o=d.resetPassword.get("newPassword"))!=null&&o.touched)?12:-1),a(2),f("",g(15,11,"forgot.resetpassword")," "),a(2),m(d.isSubmit?16:-1)}}var L=class e{authService=k(G);router=k(V);step=1;isSubmit=!1;subEmail=new v;subCode=new v;subReset=new v;verifyEmail=new F({email:new b(null,[_.required,_.email])});verifyCode=new F({resetCode:new b(null,[_.required,_.pattern(/^\w{6}$/)])});resetPassword=new F({email:new b(null,[_.required,_.email]),newPassword:new b(null,[_.required,_.pattern(/^\w{6}$/)])});verifyEmailSubmit(){this.verifyEmail.valid&&(this.isSubmit=!0,this.subEmail=this.authService.setEmailVerify(this.verifyEmail.value).subscribe({next:r=>{this.isSubmit=!1,r.statusMsg=="success"&&(this.step=2)},error:r=>{this.isSubmit=!1,console.log(r)}}))}verifyCodeSubmit(){this.verifyCode.valid&&(this.isSubmit=!0,this.subCode=this.authService.setCodeVerify(this.verifyCode.value).subscribe({next:r=>{this.isSubmit=!1,r.status=="Success"&&(this.step=3)},error:r=>{this.isSubmit=!1,console.log(r)}}))}resetPasswordSubmit(){this.resetPassword.valid&&(this.isSubmit=!0,this.subReset=this.authService.setResetPassword(this.resetPassword.value).subscribe({next:r=>{this.isSubmit=!1,localStorage.setItem("userToken",r.token),this.authService.saveTokenData(),this.router.navigate(["/home"])},error:r=>{this.isSubmit=!1,console.log(r)}}))}ngOnDestroy(){this.subEmail.unsubscribe(),this.subCode.unsubscribe(),this.subReset.unsubscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=P({type:e,selectors:[["app-forgot"]],decls:7,vars:4,consts:[[1,"w-[75%]","mx-auto","border","rounded","shadow","p-4","my-10","bg-gray-50"],[1,"text-3xl","text-green-600","text-center","font-light","capitalize"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-2"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","email","id","email","formControlName","email",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-white","rounded-lg","bg-green-600","dark:bg-gray-800","dark:text-green-400"],[1,"btn-main"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fas","fa-spin","fa-spinner"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","password","id","password","formControlName","resetCode",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["type","password","id","password","formControlName","newPassword",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"h1",1),l(2),c(3,"translate"),n(),s(4,z,11,9,"form",2)(5,U,11,9,"form",2)(6,oe,17,13,"form",2),n()),t&2&&(a(2),T(g(3,2,"forgot.forgotPassword")),a(2),m(o.step==1?4:o.step==2?5:o.step==3?6:-1))},dependencies:[H,N,q,D,M,R,B,I],encapsulation:2})};export{L as ForgotComponent};
